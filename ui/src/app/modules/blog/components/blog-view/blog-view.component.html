<div class='blog' *ngIf='isLoaded'>
    <h1 class='blog__header'>Welcome to my blog!</h1>

    <div class='section topics'>
        <h2 class='blog__filter-header'>Topics</h2>

        <div class='line-divider'></div>

        <div class='blog__filter-btn-container'>
            <div class='blog__filter-btn-row blog__filter-btn-row--all'>
                <button
                        [ngClass]="{'btn--active': activeTopicId === -1, 'blog__filter-btn--half': isAdmin}"
                        class='btn blog__filter-btn blog__filter-btn--all'
                        (click)='filterPosts(-1)'
                        type='button'
                >
                    All
                </button>

                <ng-container *ngIf='isAdmin'>
                    <button class='btn blog__filter-btn--add btn--go' [routerLink]="['/editor']" [queryParams]='{type: "topic"}'>
                        &#x2b;
                    </button>
                </ng-container>
            </div>

            <div class='blog__filter-btn-row' *ngFor='let topic of topics'>
                <button 
                    [ngClass]="{'btn--active': topic.id === activeTopicId, 'blog__filter-btn--half': isAdmin}"
                    class='btn blog__filter-btn' 
                    (click)='filterPosts(topic.id)'
                    type='button'
                >
                    {{ topic.name }}
                </button>
    
                <ng-container *ngIf='isAdmin'>
                    <ng-container *ngIf='topic.name === "All"'>
                        <button class='btn blog__filter-btn--add btn--go' [routerLink]="['/editor']" [queryParams]='{type: "topic"}'>
                            &#x2b;
                        </button>
                    </ng-container>
        
                    <ng-container *ngIf='topic.name !== "All"'>
                        <button
                            class='btn blog__filter-btn--edit'
                            (click)='sendTopicToEditor(topic)'
                            routerLink='/editor'
                            [queryParams]='{type: "topic", id: topic.id}'
                        >
                            &#x270F;
                        </button>
                        <button
                            class='btn blog__filter-btn--edit btn--warn'
                            (click)='deleteTopic(topic)'
                            type='button'
                        >
                            &#x2715;
                        </button>
                    </ng-container>
                </ng-container>
            </div>
        </div>
    </div>
    
    <app-post-collection [posts]='posts' [showPreview]='true' baseRoute='posts/'></app-post-collection>
    
    <div class='section-divider'></div>
</div>