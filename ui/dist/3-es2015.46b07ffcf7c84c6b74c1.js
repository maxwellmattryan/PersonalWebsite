(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2X3A":function(t,i,e){"use strict";e.d(i,"a",function(){return P});var o=e("fXoL"),n=e("N4ua"),s=e("dJ3e"),r=e("ofXK"),c=e("tyNb");function a(t,i){if(1&t&&(o.Qb(0,"h3",15),o.vc(1),o.Pb()),2&t){const t=o.bc().$implicit;o.Bb(1),o.wc(t.title)}}function b(t,i){if(1&t&&(o.Qb(0,"h3",15),o.vc(1),o.Pb()),2&t){const t=o.bc().$implicit;o.Bb(1),o.wc(t.status.status+": "+t.title)}}const l=function(){return["/blog"]};function p(t,i){if(1&t){const t=o.Rb();o.Qb(0,"a",18),o.Xb("click",function(){o.mc(t);const e=i.$implicit;return o.bc(4).blogTopicService.setActiveTopic(e)}),o.vc(1),o.Pb()}if(2&t){const t=i.$implicit;o.ec("routerLink",o.fc(2,l)),o.Bb(1),o.xc(" ",t.name," ")}}function d(t,i){if(1&t&&(o.Qb(0,"div",16),o.tc(1,p,2,3,"a",17),o.Pb()),2&t){const t=o.bc().$implicit;o.Bb(1),o.ec("ngForOf",t.topics)}}function g(t,i){if(1&t&&(o.Qb(0,"p",19),o.vc(1),o.Pb()),2&t){const t=o.bc().$implicit;o.Bb(1),o.xc(" ",t.preview.split(" ").slice(0,44).join(" ")," ... ")}}const u=function(t){return{"posts__post--rjust":t}},h=function(t){return[t]};function m(t,i){if(1&t&&(o.Qb(0,"div",8),o.Qb(1,"a",9),o.tc(2,a,2,1,"h3",10),o.tc(3,b,2,1,"h3",10),o.Qb(4,"h4",11),o.vc(5),o.Pb(),o.Pb(),o.tc(6,d,2,1,"div",12),o.tc(7,g,2,1,"p",13),o.Mb(8,"p",14),o.Pb()),2&t){const t=i.$implicit,e=i.index,n=o.bc(2);o.ec("ngClass",o.gc(8,u,e%2!=0)),o.Bb(1),o.ec("routerLink",o.gc(10,h,n.getPostUrl(t.id,t.title))),o.Bb(1),o.ec("ngIf","PUBLISHED"===t.status.status),o.Bb(1),o.ec("ngIf","PUBLISHED"!==t.status.status),o.Bb(2),o.wc(t.subtitle),o.Bb(1),o.ec("ngIf",n.showTopics),o.Bb(1),o.ec("ngIf",n.showPreview),o.Bb(1),o.ec("innerHTML",n.seoService.getFormattedDate(t.updated_at),o.nc)}}function f(t,i){1&t&&(o.Qb(0,"a",20),o.vc(1," See Blog "),o.Pb())}const _=function(t){return{"btn--hide":t}};function v(t,i){if(1&t){const t=o.Rb();o.Qb(0,"div",1),o.Qb(1,"h2",2),o.vc(2,"Posts"),o.Pb(),o.Mb(3,"div",3),o.Qb(4,"div",4),o.tc(5,m,9,12,"div",5),o.Pb(),o.Qb(6,"button",6),o.Xb("click",function(){return o.mc(t),o.bc().displayMorePosts()}),o.vc(7," Load More "),o.Pb(),o.tc(8,f,2,0,"a",7),o.Pb()}if(2&t){const t=o.bc();o.Bb(5),o.ec("ngForOf",t.getPosts())("ngForTrackBy",t.trackingService.objectById),o.Bb(1),o.ec("ngClass",o.gc(4,_,t.nPostsToDisplay>=t.posts.length)),o.Bb(2),o.ec("ngIf",t.showReadmore)}}let P=(()=>{class t{constructor(t,i,e,o){this.blogComparisonService=t,this.blogTopicService=i,this.seoService=e,this.trackingService=o,this.baseRoute="blog/posts",this.nPostsToDisplay=5}ngOnInit(){this.posts.forEach(t=>{t.topics.sort(this.blogComparisonService.topics)})}getPosts(){return this.posts.slice(0,this.nPostsToDisplay)}displayMorePosts(){this.nPostsToDisplay+=5,this.nPostsToDisplay>=this.posts.length&&(this.nPostsToDisplay=this.posts.length)}getPostUrl(t,i){return`${this.baseRoute}/${this.seoService.getCanonicalUrl(t,i)}`}}return t.\u0275fac=function(i){return new(i||t)(o.Lb(n.b),o.Lb(n.d),o.Lb(s.e),o.Lb(s.f))},t.\u0275cmp=o.Fb({type:t,selectors:[["ui-blog-post-collection"]],inputs:{posts:"posts",showPreview:"showPreview",showTopics:"showTopics",showReadmore:"showReadmore",baseRoute:"baseRoute"},decls:1,vars:1,consts:[["class","section posts",4,"ngIf"],[1,"section","posts"],[1,"posts__header"],[1,"line-divider"],[1,"container","posts__post-container"],["class","posts__post",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["aria-label","Display more posts",1,"btn","posts__load-btn",3,"ngClass","click"],["class","btn posts__readmore-btn","routerLink","/blog",4,"ngIf"],[1,"posts__post",3,"ngClass"],[1,"posts__post-anchor-wrapper",3,"routerLink"],["class","posts__post-title",4,"ngIf"],[1,"posts__post-subtitle"],["class","posts__post-topic-list",4,"ngIf"],["class","posts__post-preview",4,"ngIf"],[1,"posts__post-date",3,"innerHTML"],[1,"posts__post-title"],[1,"posts__post-topic-list"],["class","posts__post-topic-item",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"posts__post-topic-item",3,"routerLink","click"],[1,"posts__post-preview"],["routerLink","/blog",1,"btn","posts__readmore-btn"]],template:function(t,i){1&t&&o.tc(0,v,9,6,"div",0),2&t&&o.ec("ngIf",i.posts)},directives:[r.j,r.i,r.h,c.d],styles:[".posts[_ngcontent-%COMP%]{min-height:calc(41vh + 1px)}.posts__post-container[_ngcontent-%COMP%]{margin-bottom:2rem}.posts__post-date[_ngcontent-%COMP%], .posts__post-preview[_ngcontent-%COMP%], .posts__post-subtitle[_ngcontent-%COMP%], .posts__post-title[_ngcontent-%COMP%], .posts__post-topic-list[_ngcontent-%COMP%]{padding:1rem 2rem}.posts__post[_ngcontent-%COMP%]{background-color:#acb5c7;border:1px solid #000}.posts__post-title[_ngcontent-%COMP%]{padding-top:2rem}.posts__post-subtitle[_ngcontent-%COMP%]{color:#f7faff;font-style:italic;font-weight:500;padding-top:.5rem}.posts__post-date[_ngcontent-%COMP%]{color:#333944;font-style:italic;padding-bottom:2rem}.posts__post-topic-list[_ngcontent-%COMP%]{color:#4b6185;display:grid;grid-gap:.5rem}.posts__post-topic-item[_ngcontent-%COMP%]{color:#4b6185}.posts__post-preview[_ngcontent-%COMP%]{color:#333944}.posts__load-btn[_ngcontent-%COMP%], .posts__readmore-btn[_ngcontent-%COMP%]{font-size:100%;height:48px;max-width:316px;width:100%}.posts__readmore-btn[_ngcontent-%COMP%]{line-height:48px}@media only screen and (min-width:768px){.posts__post-title[_ngcontent-%COMP%]:hover, .posts__post-topic-item[_ngcontent-%COMP%]:hover{text-decoration:underline}}"],changeDetection:0}),t})()},N4ua:function(t,i,e){"use strict";e.d(i,"a",function(){return c}),e.d(i,"b",function(){return b}),e.d(i,"c",function(){return l}),e.d(i,"d",function(){return p});var o=e("tk/3"),n=e("AytR"),s=e("vAmI"),r=e("fXoL");let c=(()=>{class t extends s.a{constructor(t){super(t)}getBlogAuthors(){return this.http.get(`${n.a.API_URL}/blog/authors`)}createPost(t){const i=this.contentTypeHeader();return this.http.post(`${n.a.API_URL}/blog/posts`,t,{headers:i})}deletePost(t){return this.http.delete(`${n.a.API_URL}/blog/posts/${t}`)}getPost(t){return this.http.get(`${n.a.API_URL}/blog/posts/${t}`)}getPosts(t=-1,i=!0){let e=new o.e;return-1!=t&&(e=e.set("topicId",t.toString())),i&&(e=e.set("isPublished","true")),this.http.get(`${n.a.API_URL}/blog/posts`,{params:e})}getPostStatuses(){return this.http.get(`${n.a.API_URL}/blog/post-statuses`)}updatePost(t){const i=this.contentTypeHeader();return this.http.put(`${n.a.API_URL}/blog/posts/${t.id}`,t,{headers:i})}createTopic(t){const i=this.contentTypeHeader();return this.http.post(`${n.a.API_URL}/blog/topics`,t,{headers:i})}deleteTopic(t){return this.http.delete(`${n.a.API_URL}/blog/topics/${t}`)}getTopics(){return this.http.get(`${n.a.API_URL}/blog/topics`)}updateTopic(t){const i=this.contentTypeHeader();return this.http.put(`${n.a.API_URL}/blog/topics/${t.id}`,t,{headers:i})}}return t.\u0275fac=function(i){return new(i||t)(r.Ub(o.b))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=e("dJ3e");let b=(()=>{class t extends a.a{constructor(){super(),this.posts=(t,i)=>t.updated_at<i.updated_at?1:t.updated_at>i.updated_at?-1:0,this.topics=(t,i)=>t.name>i.name?1:t.name<i.name?-1:0}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),l=(()=>{class t extends a.b{constructor(){super()}getPost(){return this.post}hasPost(){return void 0!==this.post}setPost(t){this.post=t}getTopic(){return this.topic}hasTopic(){return void 0!==this.topic}setTopic(t){this.topic=t}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p=(()=>{class t{constructor(){}getActiveTopicId(){return this.activeTopic?this.activeTopic.id:-1}hasActiveTopic(){return null!=this.activeTopic}setActiveTopic(t){this.activeTopic=t}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},X6tI:function(t,i,e){"use strict";e.r(i),e.d(i,"BlogModule",function(){return rt});var o=e("ofXK"),n=e("3Pt+"),s=e("lR5k"),r=e("pKmL"),c=e("7of8"),a=e("tyNb"),b=e("fXoL");let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b.Fb({type:t,selectors:[["ui-blog"]],decls:1,vars:0,template:function(t,i){1&t&&b.Mb(0,"router-outlet")},directives:[a.f],encapsulation:2}),t})();var p=e("2X3A");class d{constructor(t){Object.assign(this,t)}deserialize(t){return Object.assign(this,t),this}}class g{constructor(t){Object.assign(this,t)}deserialize(t){return Object.assign(this,t),this}}class u{constructor(t){Object.assign(this,t)}deserialize(t){return Object.assign(this,t),this}}class h{constructor(t){Object.assign(this,t)}deserialize(t){return Object.assign(this,t),this.author=t.author.map(t=>new d(Object.assign({},t)).deserialize(t)),this.status=t.status.map(t=>new g(Object.assign({},t)).deserialize(t)),this.topics=t.topics.map(t=>new u(Object.assign({},t)).deserialize(t)),this}}var m=e("Rtfg"),f=e("N4ua"),_=e("dJ3e"),v=e("jhN1"),P=e("QibW"),S=e("bSwM"),M=e("4E6C");function w(t,i){if(1&t&&(b.Qb(0,"mat-radio-button",20),b.vc(1),b.Pb()),2&t){const t=i.$implicit,e=b.bc(2);b.ec("value",e.buildAuthorName(t)),b.Bb(1),b.wc(e.buildAuthorName(t))}}function O(t,i){if(1&t&&(b.Qb(0,"mat-radio-button",20),b.vc(1),b.Pb()),2&t){const t=i.$implicit;b.ec("value",t.status),b.Bb(1),b.wc(t.status)}}function C(t,i){if(1&t&&(b.Qb(0,"div",21),b.Qb(1,"mat-checkbox",22),b.vc(2),b.Pb(),b.Mb(3,"br"),b.Pb()),2&t){const t=i.index,e=b.bc(2);b.Bb(1),b.ec("formControlName",t),b.Bb(1),b.wc(e.topicData[t].name)}}function B(t,i){1&t&&(b.Ob(0),b.Qb(1,"div",23),b.Mb(2,"div",24),b.Pb(),b.Nb())}function T(t,i){1&t&&(b.Ob(0),b.vc(1," Submit "),b.Nb())}const I=function(t,i){return{"btn-loading":t,"btn--inactive":i}};function k(t,i){if(1&t){const t=b.Rb();b.Qb(0,"div",2),b.Qb(1,"h1",3),b.vc(2,"Blog Post Editor"),b.Pb(),b.Mb(3,"div",4),b.Qb(4,"form",5),b.Xb("ngSubmit",function(){return b.mc(t),b.bc().onSubmit()}),b.Qb(5,"div",6),b.Qb(6,"label",7),b.vc(7,"Title"),b.Pb(),b.Mb(8,"br"),b.Mb(9,"br"),b.Mb(10,"input",8),b.Pb(),b.Qb(11,"div",6),b.Qb(12,"label",7),b.vc(13,"Subtitle"),b.Pb(),b.Mb(14,"br"),b.Mb(15,"br"),b.Mb(16,"input",9),b.Pb(),b.Qb(17,"div",6),b.Qb(18,"label",7),b.vc(19,"Author"),b.Pb(),b.Mb(20,"br"),b.Mb(21,"br"),b.Qb(22,"mat-radio-group",10),b.tc(23,w,2,2,"mat-radio-button",11),b.Pb(),b.Pb(),b.Qb(24,"div",6),b.Qb(25,"label",7),b.vc(26,"Status"),b.Pb(),b.Mb(27,"br"),b.Mb(28,"br"),b.Qb(29,"mat-radio-group",12),b.tc(30,O,2,2,"mat-radio-button",11),b.Pb(),b.Pb(),b.Qb(31,"div",6),b.Qb(32,"label",7),b.vc(33,"Topics"),b.Pb(),b.Mb(34,"br"),b.Mb(35,"br"),b.tc(36,C,4,2,"div",13),b.Pb(),b.Qb(37,"div",6),b.Qb(38,"label",7),b.vc(39,"Preview"),b.Pb(),b.Mb(40,"br"),b.Mb(41,"br"),b.Mb(42,"textarea",14),b.Pb(),b.Qb(43,"div",15),b.Qb(44,"label",7),b.vc(45,"Content"),b.Pb(),b.Mb(46,"br"),b.Mb(47,"br"),b.Mb(48,"textarea",16),b.Pb(),b.Qb(49,"div",6),b.Qb(50,"label",7),b.vc(51,"Image URL"),b.Pb(),b.Mb(52,"br"),b.Mb(53,"br"),b.Mb(54,"input",17),b.Pb(),b.Qb(55,"button",18),b.tc(56,B,3,0,"ng-container",19),b.tc(57,T,2,0,"ng-container",19),b.Pb(),b.Pb(),b.Pb()}if(2&t){const t=b.bc();b.Bb(4),b.ec("formGroup",t.postForm),b.Bb(19),b.ec("ngForOf",t.authorData)("ngForTrackBy",t.trackingService.objectById),b.Bb(7),b.ec("ngForOf",t.statusData)("ngForTrackBy",t.trackingService.objectById),b.Bb(6),b.ec("ngForOf",t.postForm.controls.topics.controls)("ngForTrackBy",t.trackingService.objectById),b.Bb(19),b.ec("ngClass",b.hc(11,I,t.isSubmittingForm,!t.postForm.valid))("disabled",!t.postForm.valid),b.Bb(1),b.ec("ngIf",t.isSubmittingForm),b.Bb(1),b.ec("ngIf",!t.isSubmittingForm)}}function F(t,i){1&t&&b.Mb(0,"ui-loading-spinner")}let L=(()=>{class t{constructor(t,i,e,o,n,s,r,c,a,b,l){this.authService=t,this.blogApiService=i,this.blogEditorService=e,this.blogComparisonService=o,this.notificationService=n,this.seoService=s,this.titleService=r,this.trackingService=c,this.validationService=a,this.formBuilder=b,this.router=l,this.authorData=[],this.statusData=[],this.topicData=[],this.isLoaded=!1,this.isSubmittingForm=!1}ngOnDestroy(){this.blogEditorService.setPost(null)}ngOnInit(){this.titleService.setTitle("Blog Post Editor | Matthew Maxwell"),this.checkForAdmin(),this.setPageHideEvent(),this.initPostForm()}checkForAdmin(){this.authService.isLoggedIn()||this.router.navigate([""])}setPageHideEvent(){window.onpagehide=()=>{this.blogEditorService.setPost(null)}}initPostForm(){this.loadPostData(),this.loadAuthorData(),this.loadStatusData(),this.loadTopicData(),this.buildPostForm()}loadPostData(){this.postData=this.blogEditorService.getPost()}loadAuthorData(){this.blogApiService.getBlogAuthors().subscribe(t=>{this.authorData=t})}loadStatusData(){this.blogApiService.getPostStatuses().subscribe(t=>{this.statusData=t})}loadTopicData(){this.blogApiService.getTopics().subscribe(t=>{this.topicData=t.sort(this.blogComparisonService.topics),this.setTopicControls(this.postData?this.postData.topics.map(t=>t.id):[]),this.isLoaded=!0})}setTopicControls(t){this.topicData.forEach(i=>{const e=this.formBuilder.control(t.includes(i.id));this.postForm.controls.topics.push(e)})}buildPostForm(){this.postForm=this.formBuilder.group(this.postData?{title:this.formBuilder.control(this.postData.title,[n.p.required,n.p.maxLength(255)]),subtitle:this.formBuilder.control(this.postData.subtitle,[n.p.required]),author:this.formBuilder.control(this.buildAuthorName(this.postData.author),[n.p.required]),status:this.formBuilder.control(this.postData.status.status,[n.p.required]),topics:this.formBuilder.array(this.topicData,[this.validationService.hasMinElements(1)]),preview:this.formBuilder.control(this.postData.preview,[n.p.required]),content:this.formBuilder.control(this.postData.content,[n.p.required]),image_url:this.formBuilder.control(this.postData.image_url,[n.p.required])}:{title:this.formBuilder.control("",[n.p.required,n.p.maxLength(255)]),subtitle:this.formBuilder.control("",[n.p.required]),author:this.formBuilder.control("Matthew Maxwell",[n.p.required]),status:this.formBuilder.control("DRAFT",[n.p.required]),topics:this.formBuilder.array([],[this.validationService.hasMinElements(1)]),preview:this.formBuilder.control("",[n.p.required]),content:this.formBuilder.control("",[n.p.required]),image_url:this.formBuilder.control("",[n.p.required])})}buildAuthorName(t){return`${t.first_name} ${t.last_name}`}onSubmit(){this.isSubmittingForm=!0;const t=this.buildFormPostData();void 0===t.id?this.blogApiService.createPost(t).subscribe(t=>{this.isSubmittingForm=!1,this.notificationService.createNotification("Successfully created new post!"),this.router.navigate([`blog/posts/${this.seoService.getCanonicalUrl(t.id,t.title)}`])}):this.blogApiService.updatePost(t).subscribe(t=>{this.isSubmittingForm=!1,this.notificationService.createNotification("Successfully updated existing post!"),this.router.navigate([`blog/posts/${this.seoService.getCanonicalUrl(t.id,t.title)}`])})}buildFormPostData(){const t=this.buildFormAuthorData(),i=this.buildFormStatusData(),e=this.buildFormTopicData();return new h(Object.assign(Object.assign({},this.postForm.value),{id:this.postData?this.postData.id:void 0,author:t,status:i,topics:e}))}buildFormAuthorData(){return this.authorData.find(t=>this.buildAuthorName(t)===this.postForm.value.author)}buildFormStatusData(){return this.statusData.find(t=>t.status===this.postForm.value.status)}buildFormTopicData(){return this.postForm.value.topics.map((t,i)=>{if(t)return this.topicData[i]}).filter(t=>void 0!==t)}}return t.\u0275fac=function(i){return new(i||t)(b.Lb(m.c),b.Lb(f.a),b.Lb(f.c),b.Lb(f.b),b.Lb(_.c),b.Lb(_.e),b.Lb(v.c),b.Lb(_.f),b.Lb(_.g),b.Lb(n.d),b.Lb(a.b))},t.\u0275cmp=b.Fb({type:t,selectors:[["ui-blog-post-editor"]],decls:3,vars:2,consts:[["class","section editor",4,"ngIf","ngIfElse"],["loading",""],[1,"section","editor"],[1,"editor__header"],[1,"line-divider"],[1,"editor__form",3,"formGroup","ngSubmit"],[1,"form-field","editor__form-field"],[1,"form-field-label","editor__form-field-label"],["formControlName","title","required","","autofocus",""],["formControlName","subtitle","required","","autofocus",""],["formControlName","author","name","author","required",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["formControlName","status","name","status","required",""],["class","form__checkbox-item","formArrayName","topics",4,"ngFor","ngForOf","ngForTrackBy"],["formControlName","preview","required",""],[1,"form-field","form-field--large","editor__form-field"],["formControlName","content","required",""],["formControlName","image_url","required",""],["aria-label","Submit post",1,"btn","editor__form-btn","editor__form-btn--submit",3,"ngClass","disabled"],[4,"ngIf"],[3,"value"],["formArrayName","topics",1,"form__checkbox-item"],[3,"formControlName"],[1,"btn-loader-container"],[1,"btn-loader"]],template:function(t,i){if(1&t&&(b.tc(0,k,58,14,"div",0),b.tc(1,F,1,0,"ng-template",null,1,b.uc)),2&t){const t=b.kc(2);b.ec("ngIf",i.isLoaded)("ngIfElse",t)}},directives:[o.j,n.q,n.k,n.f,n.b,n.j,n.e,n.o,P.b,o.i,o.h,P.a,n.c,S.a,M.a],encapsulation:2}),t})();var y=e("N24m");function x(t,i){if(1&t&&(b.Qb(0,"h1",15),b.vc(1),b.Pb()),2&t){const t=b.bc(2);b.Bb(1),b.wc(t.post.title)}}function D(t,i){if(1&t&&(b.Qb(0,"h1",15),b.vc(1),b.Pb()),2&t){const t=b.bc(2);b.Bb(1),b.wc(t.post.status.status+": "+t.post.title)}}function Q(t,i){if(1&t){const t=b.Rb();b.Qb(0,"div",16),b.Qb(1,"a",17),b.Xb("click",function(){return b.mc(t),b.bc(2).sendPostToEditor()}),b.vc(2," \u270f "),b.Pb(),b.Qb(3,"a",18),b.Xb("click",function(){b.mc(t);const i=b.bc(2);return i.deletePost(i.post.id)}),b.vc(4," \u2715 "),b.Pb(),b.Pb()}}const A=function(){return["/blog"]};function N(t,i){if(1&t){const t=b.Rb();b.Qb(0,"a",19),b.Xb("click",function(){b.mc(t);const e=i.$implicit;return b.bc(2).blogTopicService.setActiveTopic(e)}),b.vc(1),b.Pb()}if(2&t){const t=i.$implicit;b.ec("routerLink",b.fc(2,A)),b.Bb(1),b.xc(" ",t.name," ")}}function E(t,i){if(1&t&&(b.Qb(0,"div",2),b.tc(1,x,2,1,"h1",3),b.tc(2,D,2,1,"h1",3),b.Qb(3,"h2",4),b.vc(4),b.Pb(),b.tc(5,Q,5,0,"div",5),b.Mb(6,"p",6),b.Qb(7,"div",7),b.tc(8,N,2,3,"a",8),b.Pb(),b.Mb(9,"div",9),b.Qb(10,"div",10),b.Qb(11,"picture"),b.Mb(12,"source",11),b.Mb(13,"source",12),b.Mb(14,"img",13),b.Pb(),b.Pb(),b.Mb(15,"markdown",14),b.Pb()),2&t){const t=b.bc();b.Bb(1),b.ec("ngIf","PUBLISHED"===t.post.status.status),b.Bb(1),b.ec("ngIf","PUBLISHED"!==t.post.status.status),b.Bb(2),b.wc(t.post.subtitle),b.Bb(1),b.ec("ngIf",t.isAdmin),b.Bb(1),b.ec("innerHtml","Updated: "+t.seoService.getFormattedDate(t.post.updated_at),b.nc),b.Bb(2),b.ec("ngForOf",t.post.topics)("ngForTrackBy",t.trackingService.objectById),b.Bb(4),b.ec("srcset",t.fileService.getImageUri(t.post.image_url,"webp"),b.oc),b.Bb(1),b.ec("srcset",t.fileService.getImageUri(t.post.image_url,"png"),b.oc),b.Bb(1),b.ec("alt","Image for post: "+t.post.title)("src",t.fileService.getImageUri(t.post.image_url,"png"),b.oc),b.Bb(1),b.ec("data",t.post.content)}}function $(t,i){1&t&&b.Mb(0,"ui-loading-spinner")}let R=(()=>{class t{constructor(t,i,e,o,n,s,r,c,a,b,l,p){this.authService=t,this.blogApiService=i,this.blogEditorService=e,this.blogComparisonService=o,this.blogTopicService=n,this.changeDetectorRef=s,this.fileService=r,this.notificationService=c,this.seoService=a,this.titleService=b,this.trackingService=l,this.router=p,this.isAdmin=!1,this.isLoaded=!1}ngOnInit(){this.isAdmin=this.authService.isLoggedIn();const t=this.seoService.getIdFromUrl(this.router.url);if(!t)return this.notificationService.createNotification("Unable to find post ID."),void this.router.navigate([""]);this.blogApiService.getPost(t).subscribe(t=>{"PUBLISHED"===t.status.status||this.isAdmin||(this.notificationService.createNotification("Unable to view the blog post."),this.router.navigate([""])),this.titleService.setTitle(`${t.title} | Blog | Matthew Maxwell`),this.post=t,this.post.topics.sort(this.blogComparisonService.topics),this.isLoaded=!0,this.changeDetectorRef.detectChanges()})}sendPostToEditor(){this.blogEditorService.setPost(this.post)}deletePost(t){this.notificationService.deleteConfirmation("blog post")&&this.blogApiService.deletePost(t).subscribe(t=>{this.notificationService.createNotification("Successfully deleted blog post!"),this.router.navigate(["/blog"])})}}return t.\u0275fac=function(i){return new(i||t)(b.Lb(m.c),b.Lb(f.a),b.Lb(f.c),b.Lb(f.b),b.Lb(f.d),b.Lb(b.h),b.Lb(y.a),b.Lb(_.c),b.Lb(_.e),b.Lb(v.c),b.Lb(_.f),b.Lb(a.b))},t.\u0275cmp=b.Fb({type:t,selectors:[["ui-blog-post-view"]],decls:3,vars:2,consts:[["class","section post",4,"ngIf","ngIfElse"],["loading",""],[1,"section","post"],["class","post__title",4,"ngIf"],[1,"post__subtitle"],["class","post__btn-container",4,"ngIf"],[1,"post__date",3,"innerHtml"],[1,"post__topic-container"],["class","post__topic-item",3,"routerLink","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"line-divider"],[1,"post__image-container"],["type","image/webp",3,"srcset"],["type","image/png",3,"srcset"],[1,"post__image",3,"alt","src"],[3,"data"],[1,"post__title"],[1,"post__btn-container"],["routerLink","/blog/posts/editor",1,"btn","post__btn",3,"click"],["routerLink","/blog",1,"btn","post__btn","btn--warn",3,"click"],[1,"post__topic-item",3,"routerLink","click"]],template:function(t,i){if(1&t&&(b.tc(0,E,16,12,"div",0),b.tc(1,$,1,0,"ng-template",null,1,b.uc)),2&t){const t=b.kc(2);b.ec("ngIf",i.isLoaded)("ngIfElse",t)}},directives:[o.j,o.i,s.a,a.d,M.a],styles:["markdown[_ngcontent-%COMP%]     h1, markdown[_ngcontent-%COMP%]     h2, markdown[_ngcontent-%COMP%]     h3, markdown[_ngcontent-%COMP%]     h4, markdown[_ngcontent-%COMP%]     h5, markdown[_ngcontent-%COMP%]     h6{margin:calc(2rem * 1.75) 0 calc(2rem * .75)}markdown[_ngcontent-%COMP%]     img, markdown[_ngcontent-%COMP%]     p{margin:2rem 0}markdown[_ngcontent-%COMP%]     pre{margin:calc(1rem * 1) 0 calc(1rem * 1.5)}markdown[_ngcontent-%COMP%]     a{color:#aec6f1;display:inline-block}markdown[_ngcontent-%COMP%]     div img{box-sizing:border-box}markdown[_ngcontent-%COMP%]     div img, markdown[_ngcontent-%COMP%]     img{border:1px solid #000;text-align:center;width:100%}markdown[_ngcontent-%COMP%]     img{height:auto}markdown[_ngcontent-%COMP%]     p code{background-color:#4e5d74;box-sizing:border-box;color:#fcfdff;margin:0 calc(.5rem / 2);padding:calc(.5rem / 4) calc(.5rem / 2)}markdown[_ngcontent-%COMP%]     .text--note{color:#aec6f1}markdown[_ngcontent-%COMP%]     .text--note-paragraph{color:#e1edff}markdown[_ngcontent-%COMP%]     .text--caution{color:#ffe7a0}markdown[_ngcontent-%COMP%]     .text--caution-paragraph{color:#ffefd3}markdown[_ngcontent-%COMP%]     .text--warn{color:#ffa0b6}markdown[_ngcontent-%COMP%]     .text--warn-paragraph{color:#ffd6dc}markdown[_ngcontent-%COMP%]     .text--tip{color:#9bec8f}markdown[_ngcontent-%COMP%]     .text--tip-paragraph{color:#d7ffd5}markdown[_ngcontent-%COMP%]     li{line-height:1.5rem;margin-bottom:.5rem}@media only screen and (min-width:768px){markdown[_ngcontent-%COMP%]     a:hover{text-decoration:underline}markdown[_ngcontent-%COMP%]     img{width:64%}}.post__btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.post__btn[_ngcontent-%COMP%]{font-size:160%;height:36px;line-height:36px;margin:0 .5rem 2rem 0;width:64px}.post__btn--warn[_ngcontent-%COMP%]{font-size:140%}.post__subtitle[_ngcontent-%COMP%], .post__title[_ngcontent-%COMP%]{margin-bottom:2rem}.post__subtitle[_ngcontent-%COMP%]{color:#acb5c7;font-style:italic;font-weight:500}.post__date[_ngcontent-%COMP%]{font-style:italic;margin-bottom:1rem}.post__topic-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.post__topic-item[_ngcontent-%COMP%]{color:#aec6f1;margin-top:.5rem}.post__image-container[_ngcontent-%COMP%]{text-align:center;width:100%}.post__image[_ngcontent-%COMP%]{height:auto;margin-bottom:2rem;width:100%}@media only screen and (min-width:768px){.post__topic-item[_ngcontent-%COMP%]:hover{text-decoration:underline}.post__image[_ngcontent-%COMP%]{width:64%}}"],changeDetection:0}),t})();function j(t,i){1&t&&(b.Ob(0),b.Qb(1,"div",12),b.Mb(2,"div",13),b.Pb(),b.Nb())}function U(t,i){1&t&&(b.Ob(0),b.vc(1," Submit "),b.Nb())}const q=function(t,i){return{"btn-loading":t,"btn--inactive":i}};function H(t,i){if(1&t){const t=b.Rb();b.Qb(0,"div",2),b.Qb(1,"h1",3),b.vc(2,"Blog Topic Editor"),b.Pb(),b.Mb(3,"div",4),b.Qb(4,"form",5),b.Xb("ngSubmit",function(){return b.mc(t),b.bc().onSubmit()}),b.Qb(5,"div",6),b.Qb(6,"label",7),b.vc(7,"Name"),b.Pb(),b.Mb(8,"br"),b.Mb(9,"br"),b.Mb(10,"input",8),b.Pb(),b.Qb(11,"div",6),b.Qb(12,"label",7),b.vc(13,"Description"),b.Pb(),b.Mb(14,"br"),b.Mb(15,"br"),b.Mb(16,"input",9),b.Pb(),b.Qb(17,"button",10),b.tc(18,j,3,0,"ng-container",11),b.tc(19,U,2,0,"ng-container",11),b.Pb(),b.Pb(),b.Pb()}if(2&t){const t=b.bc();b.Bb(4),b.ec("formGroup",t.topicForm),b.Bb(13),b.ec("ngClass",b.hc(5,q,t.isSubmittingForm,!t.topicForm.valid))("disabled",!t.topicForm.valid),b.Bb(1),b.ec("ngIf",t.isSubmittingForm),b.Bb(1),b.ec("ngIf",!t.isSubmittingForm)}}function X(t,i){1&t&&b.Mb(0,"ui-loading-spinner")}let z=(()=>{class t{constructor(t,i,e,o,n,s,r){this.authService=t,this.blogApiService=i,this.blogEditorService=e,this.formBuilder=o,this.notificationService=n,this.titleService=s,this.router=r,this.isLoaded=!1,this.isSubmittingForm=!1}ngOnDestroy(){this.blogEditorService.setTopic(null)}ngOnInit(){this.titleService.setTitle("Blog Topic Editor | Matthew Maxwell"),this.checkForAdmin(),this.setPageHideEvent(),this.initTopicForm()}checkForAdmin(){this.authService.isLoggedIn()||this.router.navigate([""])}setPageHideEvent(){window.onpagehide=()=>{this.blogEditorService.setTopic(null)}}initTopicForm(){this.loadTopicData(),this.buildTopicForm()}loadTopicData(){this.topicData=this.blogEditorService.getTopic(),this.isLoaded=!0}buildTopicForm(){this.topicForm=this.formBuilder.group(this.topicData?{name:this.formBuilder.control(this.topicData.name,[n.p.required,n.p.maxLength(50)]),description:this.formBuilder.control(this.topicData.description,[n.p.required])}:{name:this.formBuilder.control("",[n.p.required,n.p.maxLength(50)]),description:this.formBuilder.control("",[n.p.required])})}onSubmit(){this.isSubmittingForm=!0;const t=this.buildFormTopicData();void 0===t.id?this.blogApiService.createTopic(t).subscribe(t=>{this.isSubmittingForm=!1,this.notificationService.createNotification("Successfully created new topic."),this.router.navigate(["blog"])}):this.blogApiService.updateTopic(t).subscribe(t=>{this.isSubmittingForm=!1,this.notificationService.createNotification("Successfully updated existing topic."),this.router.navigate(["blog"])})}buildFormTopicData(){return new u(Object.assign(Object.assign({},this.topicForm.value),{id:this.topicData?this.topicData.id:void 0}))}}return t.\u0275fac=function(i){return new(i||t)(b.Lb(m.c),b.Lb(f.a),b.Lb(f.c),b.Lb(n.d),b.Lb(_.c),b.Lb(v.c),b.Lb(a.b))},t.\u0275cmp=b.Fb({type:t,selectors:[["ui-blog-topic-editor"]],decls:3,vars:2,consts:[["class","section editor topic-editor",4,"ngIf","ngIfElse"],["loading",""],[1,"section","editor","topic-editor"],[1,"editor__header"],[1,"line-divider"],[1,"editor__form",3,"formGroup","ngSubmit"],[1,"form-field","editor__form-field"],[1,"form-field-label","editor__form-field-label"],["formControlName","name","required","","autofocus",""],["formControlName","description","required",""],["aria-label","Submit topic",1,"btn","editor__form-btn","editor__form-btn--submit",3,"ngClass","disabled"],[4,"ngIf"],[1,"btn-loader-container"],[1,"btn-loader"]],template:function(t,i){if(1&t&&(b.tc(0,H,20,8,"div",0),b.tc(1,X,1,0,"ng-template",null,1,b.uc)),2&t){const t=b.kc(2);b.ec("ngIf",i.isLoaded)("ngIfElse",t)}},directives:[o.j,n.q,n.k,n.f,n.b,n.j,n.e,n.o,o.h,M.a],encapsulation:2}),t})();var J=e("+5rw");function G(t,i){1&t&&(b.Ob(0),b.Qb(1,"div",13),b.Mb(2,"div",14),b.Pb(),b.Nb())}function K(t,i){1&t&&(b.Ob(0),b.vc(1," All "),b.Nb())}function W(t,i){1&t&&(b.Ob(0),b.Qb(1,"button",15),b.vc(2," + "),b.Pb(),b.Nb())}function V(t,i){1&t&&(b.Ob(0),b.Qb(1,"div",13),b.Mb(2,"div",14),b.Pb(),b.Nb())}function Y(t,i){if(1&t&&(b.Ob(0),b.vc(1),b.Nb()),2&t){const t=b.bc().$implicit;b.Bb(1),b.xc(" ",t.name," ")}}function Z(t,i){if(1&t){const t=b.Rb();b.Ob(0),b.Qb(1,"button",18),b.Xb("click",function(){b.mc(t);const i=b.bc().$implicit;return b.bc(2).sendTopicToEditor(i)}),b.vc(2," \u270f "),b.Pb(),b.Qb(3,"button",19),b.Xb("click",function(){b.mc(t);const i=b.bc().$implicit;return b.bc(2).deleteTopic(i)}),b.vc(4," \u2715 "),b.Pb(),b.Nb()}}const tt=function(t,i,e){return{"btn-loading":t,"btn--active":i,"blog__filter-btn--half":e}};function it(t,i){if(1&t){const t=b.Rb();b.Qb(0,"div",16),b.Qb(1,"button",17),b.Xb("click",function(){b.mc(t);const e=i.$implicit;return b.bc(2).filterPosts(e.id)}),b.tc(2,V,3,0,"ng-container",10),b.tc(3,Y,2,1,"ng-container",10),b.Pb(),b.tc(4,Z,5,0,"ng-container",10),b.Pb()}if(2&t){const t=i.$implicit,e=b.bc(2);b.Bb(1),b.ec("ngClass",b.ic(4,tt,e.isFilteringPosts&&t.id===e.activeTopicId,t.id===e.activeTopicId,e.isAdmin)),b.Bb(1),b.ec("ngIf",e.isFilteringPosts&&t.id===e.activeTopicId),b.Bb(1),b.ec("ngIf",!(e.isFilteringPosts&&t.id===e.activeTopicId)),b.Bb(1),b.ec("ngIf",e.isAdmin)}}function et(t,i){if(1&t){const t=b.Rb();b.Qb(0,"div",2),b.Qb(1,"h1",3),b.vc(2,"Welcome to my blog!"),b.Pb(),b.Qb(3,"div",4),b.Qb(4,"h2",5),b.vc(5,"Topics"),b.Pb(),b.Mb(6,"div",6),b.Qb(7,"div",7),b.Qb(8,"div",8),b.Qb(9,"button",9),b.Xb("click",function(){return b.mc(t),b.bc().filterPosts(-1)}),b.tc(10,G,3,0,"ng-container",10),b.tc(11,K,2,0,"ng-container",10),b.Pb(),b.tc(12,W,3,0,"ng-container",10),b.Pb(),b.tc(13,it,5,8,"div",11),b.Pb(),b.Pb(),b.Mb(14,"ui-blog-post-collection",12),b.Pb()}if(2&t){const t=b.bc();b.Bb(9),b.ec("ngClass",b.ic(8,tt,t.isFilteringPosts&&-1===t.activeTopicId,-1===t.activeTopicId,t.isAdmin)),b.Bb(1),b.ec("ngIf",t.isFilteringPosts&&-1===t.activeTopicId),b.Bb(1),b.ec("ngIf",!(t.isFilteringPosts&&-1===t.activeTopicId)),b.Bb(1),b.ec("ngIf",t.isAdmin),b.Bb(1),b.ec("ngForOf",t.topics)("ngForTrackBy",t.trackingService.objectById),b.Bb(1),b.ec("posts",t.posts)("showPreview",!0)}}function ot(t,i){1&t&&b.Mb(0,"ui-loading-spinner")}const nt=[{path:"",component:l,children:[{path:"",component:(()=>{class t{constructor(t,i,e,o,n,s,r,c,a){this.authService=t,this.blogApiService=i,this.blogComparisonService=e,this.blogEditorService=o,this.blogTopicService=n,this.notificationService=s,this.portfolioProfileService=r,this.titleService=c,this.trackingService=a,this.isAdmin=!1,this.isLoaded=!1,this.activeTopicId=-1,this.isFilteringPosts=!1}ngOnInit(){this.titleService.setTitle(`${this.portfolioProfileService.getActiveProfileName()} Blog | Matthew Maxwell`),this.isAdmin=this.authService.isLoggedIn(),this.blogApiService.getPosts(this.activeTopicId,!this.isAdmin).subscribe(t=>{this.posts=t,this.topics=this.getTopicsFromPosts().sort(this.blogComparisonService.topics),this.blogTopicService.hasActiveTopic()&&(this.filterPosts(this.blogTopicService.getActiveTopicId()),this.blogTopicService.setActiveTopic(null)),this.isLoaded=!0})}getTopicsFromPosts(){let t=[];return this.posts.forEach(i=>{i.topics.forEach(i=>{t.map(t=>t.id).includes(i.id)||t.push(i)})}),t}filterPosts(t){this.activeTopicId=t,this.isFilteringPosts=!0,this.isAdmin?this.blogApiService.getPosts(t,!1).subscribe(t=>{this.posts=t,this.isFilteringPosts=!1},t=>{this.notificationService.createNotification(t.error.message),this.isFilteringPosts=!1,this.activeTopicId=-1}):this.blogApiService.getPosts(t).subscribe(t=>{this.posts=t,this.isFilteringPosts=!1},t=>{this.notificationService.createNotification(t.error.message),this.isFilteringPosts=!1,this.activeTopicId=-1})}sendTopicToEditor(t){this.blogEditorService.setTopic(t)}deleteTopic(t){this.notificationService.deleteConfirmation("blog topic")&&this.blogApiService.deleteTopic(t.id).subscribe(i=>{this.removeTopic(t.id),this.notificationService.createNotification("Successfully deleted blog topic!"),this.filterPosts(-1)},t=>{this.notificationService.createNotification(t.error.message)})}removeTopic(t){this.topics=this.topics.filter(i=>i.id!=t),this.posts=this.posts.filter(i=>!i.topics.map(t=>t.id).includes(t))}}return t.\u0275fac=function(i){return new(i||t)(b.Lb(m.c),b.Lb(f.a),b.Lb(f.b),b.Lb(f.c),b.Lb(f.d),b.Lb(_.c),b.Lb(J.d),b.Lb(v.c),b.Lb(_.f))},t.\u0275cmp=b.Fb({type:t,selectors:[["ui-blog-view"]],decls:3,vars:2,consts:[["class","blog",4,"ngIf","ngIfElse"],["loading",""],[1,"blog"],[1,"blog__header"],[1,"section","topics"],[1,"blog__filter-header"],[1,"line-divider"],[1,"blog__filter-btn-container"],[1,"blog__filter-btn-row","blog__filter-btn-row--all"],["aria-label","Select all topics","type","button",1,"btn","blog__filter-btn","blog__filter-btn--all",3,"ngClass","click"],[4,"ngIf"],["class","blog__filter-btn-row",4,"ngFor","ngForOf","ngForTrackBy"],["baseRoute","posts/",3,"posts","showPreview"],[1,"btn-loader-container"],[1,"btn-loader"],["aria-label","Edit blog topic","routerLink","/blog/topics/editor",1,"btn","blog__filter-btn--add","btn--go"],[1,"blog__filter-btn-row"],["aria-label","Filter blog topic","type","button",1,"btn","blog__filter-btn",3,"ngClass","click"],["aria-label","Edit blog topic","routerLink","/blog/topics/editor",1,"btn","blog__filter-btn--edit",3,"click"],["aria-label","Delete blog topic","type","button",1,"btn","blog__filter-btn--edit","btn--warn",3,"click"]],template:function(t,i){if(1&t&&(b.tc(0,et,15,12,"div",0),b.tc(1,ot,1,0,"ng-template",null,1,b.uc)),2&t){const t=b.kc(2);b.ec("ngIf",i.isLoaded)("ngIfElse",t)}},directives:[o.j,o.h,o.i,p.a,a.c,M.a],styles:['.blog[_ngcontent-%COMP%]{background-color:#333944;display:grid;grid-template-areas:"header" "topics" "posts";height:auto}.blog[_ngcontent-%COMP%]   .blog__header[_ngcontent-%COMP%]{grid-area:header}.blog[_ngcontent-%COMP%]   .topics[_ngcontent-%COMP%]{grid-area:topics;min-height:auto;margin:0}.blog[_ngcontent-%COMP%]   .posts[_ngcontent-%COMP%]{grid-area:posts}.blog__header[_ngcontent-%COMP%]{margin:0 auto 2rem;padding:2rem;text-align:center}.blog__filter-header[_ngcontent-%COMP%]{margin-bottom:1rem}.blog__filter-btn-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.blog__filter-btn[_ngcontent-%COMP%]{font-size:90%;height:48px;line-height:48px;width:100%}.blog__filter-btn--add[_ngcontent-%COMP%], .blog__filter-btn--edit[_ngcontent-%COMP%]{height:36px;line-height:36px;margin-left:1rem}.blog__filter-btn--add[_ngcontent-%COMP%]{font-size:170%;width:calc(56px * 2 + 1rem)}.blog__filter-btn--edit[_ngcontent-%COMP%]{font-size:118%;width:56px}.blog__filter-btn--half[_ngcontent-%COMP%]{min-width:184px}.blog__filter-btn-row[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:space-between;width:100%}.blog__filter-btn-row--all[_ngcontent-%COMP%]{margin-bottom:2rem}@media only screen and (min-width:768px){.blog__filter-btn[_ngcontent-%COMP%]{font-size:90%;height:56px;line-height:56px;width:232px}.blog__filter-btn--add[_ngcontent-%COMP%], .blog__filter-btn--edit[_ngcontent-%COMP%]{width:52px}.blog__filter-btn--add[_ngcontent-%COMP%]{width:calc(52px + 52px + 1rem)}.blog[_ngcontent-%COMP%]{grid-template-areas:"header header header header header" "topics posts posts posts posts"}.blog[_ngcontent-%COMP%]   .topics[_ngcontent-%COMP%]{margin:0 auto;min-height:calc(100vh - 8vh)}  .section-divider{height:0}}']}),t})()},{path:"posts/editor",component:L},{path:"posts/:id/:uri",component:R},{path:"topics/editor",component:z}]}];let st=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(i){return new(i||t)},imports:[[a.e.forChild(nt)],a.e]}),t})(),rt=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(i){return new(i||t)},providers:[f.a,f.b],imports:[[st,o.b,r.a,s.b.forRoot(),c.a,n.n]]}),t})()}}]);